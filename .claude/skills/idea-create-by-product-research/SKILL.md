---
name: idea-create-by-product-research
description: 既存製品・サービス分析コマンド
allowed-tools: WebFetch, WebSearch, Task, Write, Read, Glob, Bash
---

# 既存製品・サービス分析コマンド

**目的**: 既存製品・サービスの情報をURL、Web検索、およびローカルファイルから取得し、匠Methodでモデリング可能な企画案ファイルを生成する

**使用方法**:
```
/idea-create-by-product-research <url1> [url2] [url3] ...
/idea-create-by-product-research <製品・サービス名>
```

**出力ファイル**:
- `input/idea.md` - 企画案ファイル
- `input/logo.svg` - 製品ロゴ（取得できた場合）

---

## 実行手順

### 手順1: 引数の確認と判定

引数 `$ARGUMENTS` を確認し、URLか製品名かを判定します。

**判定ルール**:
- `http://` または `https://` で始まる場合 → **URL**として処理
- それ以外 → **製品・サービス名**として処理

**製品名の場合の処理**:
製品名が渡された場合は、手順3-2（URLからの情報取得）をスキップし、手順3-3（Web検索）で情報を収集します。

引数が指定されていない場合は、ユーザーにURLまたは製品名の入力を促します。

### 手順2: 既存ファイルの削除

`input/idea.md` が存在する場合は削除する。

### 手順3: 情報収集（並列実行）

以下の処理を**並列で実行**して効率化します：

#### 3-1. input/ディレクトリのファイル読み込み

`Glob` ツールで `input/` ディレクトリ内のファイルを検索し、`Read` ツールで内容を読み込みます。

**読み込み対象**: `input/` ディレクトリ内のすべてのファイル
**読み込み対象外**: `idea*.md` パターンに一致するファイル

#### 3-2. URLから情報を取得（URLが指定された場合）

**※製品名が指定された場合はこの手順をスキップ**

`WebFetch` ツールを使用して、各URLから製品・サービス情報を取得します。
**複数URLは並列でWebFetchを実行**します。

各URLに対して以下のプロンプトで情報を取得：
```
この製品・サービスについて、以下の情報を抽出してください：
1. 製品・サービス名
2. 提供会社名と会社概要
3. 製品が開発された背景・解決しようとした課題
4. 製品・サービスの概要
5. 主な提供価値
6. ターゲットユーザー
7. 主な機能・特徴
8. キャッチコピー・タグライン（存在する場合）
9. ビジョンステートメント・ミッション・パーパス（存在する場合）
10. ロゴ画像のURL（SVG形式が望ましい、なければPNG/JPG）
```

#### 3-3. Web検索で追加情報を収集

`WebSearch` ツールで追加情報を**並列検索**します。

**製品名の取得方法**:
- URLが指定された場合: URLのドメイン名や取得情報から製品名を推測
- 製品名が指定された場合: 引数をそのまま使用

**検索クエリ（並列実行）**:
```
# 以下の検索を並列で実行
"[製品名] とは 特徴 機能"
"[製品名] 競合 比較 市場"
"[製品名] 導入事例 レビュー"
"[製品名] ニュース 最新"
"[製品名] logo svg"
"[製品名] 公式サイト"
"[製品名] キャッチコピー タグライン スローガン"
"[製品名] ビジョン ミッション パーパス 理念"
```

**検索のポイント**:
- 8つの検索クエリを並列実行
- 検索結果から有用なURLを抽出し、`WebFetch` で詳細取得
- 製品名のみが指定された場合は、公式サイトを優先的に取得

### 手順4: ロゴ画像の取得

製品ロゴが見つかった場合、`WebFetch` ツールでロゴ画像を取得し、`Write` ツールで `input/logo.svg`（または `input/logo.png`）として保存します。

**ロゴ取得の優先順位**:
1. 公式サイトから取得したSVGロゴ
2. Web検索で見つかったSVGロゴ
3. PNG/JPGロゴ（SVGがない場合）

**注意事項**:
- ロゴが見つからない場合はスキップ（エラーにしない）
- 著作権に配慮し、公式ロゴのみを取得
- 取得失敗時は警告を出して続行

### 手順5: エージェントの起動

`Task` ツールで `IdeaGenerator` エージェントを起動します。

**エージェントへの追加指示**: $ARGUMENTS に追加の指示（URL/製品名以外の指示）が含まれている場合、その内容をエージェント起動時のプロンプトに含めて渡すこと。

**プロンプトに含める情報**:
- input/ディレクトリから読み込んだファイルの内容（ファイル名と内容）
- WebFetchで取得した各URLの情報
- Web検索で収集した追加情報
- 参照元URLリスト
- 出力形式の指定

### 手順6: 企画案ファイルの出力

**【重要】エージェント完了後、必ず以下を実行**:

`Write` ツールで `input/idea.md` を作成します。

**出力形式**:
```markdown
# [製品・サービス名]

## キャッチコピー
[キャッチコピー・タグライン（存在する場合）]

## ビジョンステートメント
[ビジョン・ミッション・パーパス（存在する場合）]
※Webや資料から取得できた場合のみ記載。取得できなかった場合はこのセクションを省略。

## 提供会社
[会社名]
[会社の概要・事業内容]

## 製品が開発された背景
[開発の背景、解決しようとした課題、市場の問題意識]

## 製品・サービス概要
[製品・サービスの概要、主なアイデア・コンセプト]

## 提供価値
- [主な価値1]
- [主な価値2]
- [主な価値3]

## ターゲットユーザー
- [ユーザー層1]
- [ユーザー層2]

## 主な機能・特徴
- [機能・特徴1]
- [機能・特徴2]
- [機能・特徴3]

## 競合・市場環境
- [競合製品・サービス]
- [市場での位置づけ]

## ロゴ
- ファイル: input/logo.svg（取得できた場合）

## 参考URL
- [URL1]
- [URL2]

## 参考ファイル
- [読み込んだファイル名1]
- [読み込んだファイル名2]
```

### 手順7: 出力確認

`Read` ツールで生成したファイルの内容を確認し、ユーザーに報告します。

---

## 完了時の動作

- 生成されたファイル（`input/idea.md`）をユーザーに報告
- ロゴファイル（`input/logo.svg`）の取得状況を報告
- ファイルの内容をユーザーに表示
- 次のステップの案内
  - `/stakeholder-all` でPhase 1から開始可能であることを案内

---

## 使用例

```bash
# 単一URL
/idea-create-by-product-research https://example.com/product

# 複数URL（公式サイト + プレスリリース + レビュー記事など）
/idea-create-by-product-research https://example.com/product https://example.com/press https://review-site.com/article

# 製品・サービス名で検索
/idea-create-by-product-research Slack
/idea-create-by-product-research "Google Calendar"
/idea-create-by-product-research GitHub Copilot
```

---

## 注意事項

- URLはHTTPS形式で指定してください
- 製品名を指定する場合は、スペースを含む場合は引用符で囲んでください
- 既存の `input/idea.md` がある場合は自動的に削除されます
- アクセスできないURLはスキップされます
- `input/` ディレクトリ内の `idea*.md` 以外のファイルは自動的に読み込まれ、追加情報として活用されます
- Web検索により、指定URLだけでは得られない競合情報や市場動向も収集されます
- 製品名のみを指定した場合は、Web検索から公式サイトを特定して情報を取得します
- ロゴ画像は公式サイトから取得を試み、見つからない場合はスキップします
- 情報が不足している場合、Agentが推測で補完する場合があります
