---
name: common-procedures
description: 共通手順
---

# 共通手順

各コマンドから参照される共通手順を定義します。

---

## 既存ファイルの削除手順

出力ファイルが既に存在する場合、`Write` ツールによる上書きで対応するため、事前削除は不要です。

**注意**:
- `Write` ツールは既存ファイルを自動的に上書きする
- バックアップは作成しない（必要な場合はユーザーが事前に保存）

---

## エージェント起動時の追加指示

「追加指示（引数）」（`$ARGUMENTS`）が空でない場合、その内容をエージェント起動時のプロンプトに含めて渡すこと。

**例**:
```
Task: StakeholderExtractor エージェントを起動
追加指示: $ARGUMENTS の内容があれば、プロンプトに含める
```

---

## TSV出力形式の共通ルール

TSVファイルを出力する際は、以下のルールに従う：

1. **区切り文字**: タブ（`\t`）を使用
2. **ヘッダー行**: 必須（1行目に列名を記載）
3. **改行コード**: LF（`\n`）
4. **エンコーディング**: UTF-8
5. **セル内の改行**: 使用禁止（改行が必要な場合は適切に分割）
6. **セル内のタブ**: 使用禁止
7. **クォート**: 不要（特殊文字を含まない限り）

---

## 出力確認手順

ファイル出力後は、`Glob` ツールで出力ファイルパスを検索し、ファイルの存在を確認する：

- ファイルが存在しない場合: 前の手順に戻り `Write` ツールでファイルを作成する
- ファイルが存在する場合: 完了報告に進む

---

## 完了報告

タスク完了時は以下を報告する：

1. **出力したファイル名**を報告
2. **次のステップ**がある場合は、そのコマンドを案内

**報告例**:
```
出力ファイル: output/stakeholder.tsv

次のステップ: `/stakeholder-drawio-generator` を実行してDrawIOモデルを生成できます。
```

---

## DrawIO出力形式の共通ルール

DrawIOファイルを出力する際は、以下のルールに従う：

1. **ファイル形式**: XML（.drawio拡張子）
2. **出力先**: `output/drawio/` ディレクトリ
3. **サンプル参照**: `.claude/skills/*/examples/` 配下のサンプルファイルを参考にする（XML構造のみ）
4. **エンコーディング**: UTF-8

---

## 検証結果出力の共通ルール

検証結果ファイル（verify系コマンド）を出力する際は、以下のルールに従う：

1. **ファイル形式**: Markdown（.md拡張子）
2. **出力先**: `output/` ディレクトリ
3. **ファイル名**: `verify-<対象>-result.md`
4. **内容構成**:
   - 良い点
   - 悪い点
   - 改善点
   - 改善のための問い
